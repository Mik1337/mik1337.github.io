<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="shortcut icon"
      type="image/png"
      href="https://i.imgur.com/CmYcjAK.png"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link
      href="https://fonts.googleapis.com/css?family=Fira+Sans+Condensed:500i,600i,700i,800i,900i"
      rel="stylesheet"
    />
    <title>Mik</title>
    <link href="stylesheet.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-136836752-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-136836752-1");
    </script>
  </head>
  <body data-spy="scroll" data-target=".navbar" data-offset="50">
    <nav
      class="navbar navbar-expand-md bg-mik navbar-dark container-fluid fixed-top"
    >
      <a class="navbar-brand" href="https://mik1337.github.io/"
        ><img
          style="max-width:30px; margin-top: -2px;"
          src="https://i.imgur.com/CmYcjAK.png"
      /></a>
      <!-- Brand -->
      <div class="navbar-header">
        <button
          type="button"
          class="navbar-toggler hidden-md-up pull-xs-right navbar-toggler-right"
          data-toggle="collapse"
          data-target="#collapseBar"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <!-- Links -->
      </div>
      <div class="collapse navbar-collapse" id="collapseBar">
        <ul class="navbar-nav" data-toggle="collapse">
          <!-- Dropdown -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="navbardrop"
              data-toggle="dropdown"
            >
              SOCIALS
            </a>
            <div class="dropdown-menu">
              <a
                class="dropdown-item fab fa-github"
                href="https://github.com/Mik1337"
              >
                GITHUB</a
              >
              <a
                class="dropdown-item fab fa-twitch"
                href="https://www.twitch.tv/m1k2448"
              >
                TWITCH</a
              >
              <a
                class="dropdown-item fab fa-twitter"
                href="https://twitter.com/namikaze_mik"
              >
                TWITTER</a
              >
              <a
                class="dropdown-item fab fa-wordpress-simple"
                href="https://mik1337.wordpress.com"
              >
                WORDPRESS</a
              >
              <i class=""></i>
            </div>
          </li>
        </ul>
        <ul class="nav navbar-nav ml-auto pull-right nav-extras">
          <li class="nav-item">
            <a class="nav-link" href="construction.html"
              ><i class="far fa-dizzy"> Rambles Of a Brok'En Mind</i></a
            >
          </li>
        </ul>
      </div>
    </nav>
    <br />

    <center>
      <div id="chat" class="mik-messenger vertical-center">
        <div class="container-fluid">
          <p class="colourmod bigbig">SEND A MESSAGE</p>
          <p class="blur big">A secret anonymous message ;)</p>
          <br />
          <!-- <form
                action="http://localhost:3000/chat"
                class="form-fields"
                method="POST"
              > -->
          <form
            action="https://mik-messenger.herokuapp.com/chat"
            class="form-fields"
            method="POST"
          >
            <div class="row input-fields bg-blur">
              <div class="form-group col-xs-2" style="padding-right: 1em">
                <div class="d-flex flex-column" title="optional">
                  <label for="name" class="colourmod big control-label">
                    Name
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Mik (optional)"
                    name="name"
                    id="name"
                  />
                </div>
              </div>
              <div class="form-group col-xs-2" style="padding-right: 1em">
                <div class="d-flex flex-column" title="mandilorian">
                  <label for="name" class="colourmod big control-label">
                    Message
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="You're awesome"
                    name="message"
                    id="message"
                  />
                </div>
              </div>

              <div class="form-group col-xs-1 ig-handler">
                <div class="d-flex flex-column" title="optional">
                  <label for="name" class="colourmod big control-label">
                    Instagram
                  </label>
                  <input
                    type="text"
                    placeholder="@username (optional)"
                    name="instagram"
                    id="instagram"
                  />
                </div>
              </div>
              <div class="button-handler">
                <button class="btn btn-primary col-xs-2">
                  send message ;)
                </button>
              </div>
            </div>
          </form>
          <p class="colourmod big">---------------------------------</p>
        </div>
      </div>

      <div id="messages" class="my-messages container-fluid">
        <p class="colourmod bigbig">Here's some</p>
        <div class="row" id="plswork"></div>

        <script>
          fetch("https://mik-messenger.herokuapp.com/messages", {
            // fetch("http://localhost:3000/messages", {
            credentials: "omit",
            method: "GET",
            mode: "cors"
          })
            .then(data => data.json())
            .then(json => appendData(json));

          function appendData(data) {
            console.log(data);
            data.messages.map(item =>
              document.getElementById("plswork").insertAdjacentHTML(
                "beforeend",
                `
                    <div class="col-md-4">
                      <div class="card text-white bg-primary-mik mb-3" style="max-width: 18rem;">
                        <div class="card-header smol">${item.name}</div>
                        <div class="card-body">
                          <p class="card-text smol">
                            ${item.message}
                          </p>
                        </div>
                      </div>
                    </div>
                  `
              )
            );
          }
        </script>
      </div>
    </center>
  </body>
</html>
